<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1c2331">
    <title>TCV Crosstraining</title>
    <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIlRDViBDcm9zc3RyYWluaW5nIiwKICAic2hvcnRfbmFtZSI6ICJUUiBDcm9zc3RyYWluaW5nIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiL2FwaS9wbGFjZWhvbGRlci8xOTIvMTkyIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9CiAgXSwKICAic3RhcnRfdXJsIjogIi8iLAogICJkaXNwbGF5IjogInN0YW5kYWxvbmUiLAogICJiYWNrZ3JvdW5kX2NvbG9yIjogIiMxYzIzMzEiLAogICJ0aGVtZV9jb2xvciI6ICIjMWMyMzMxIgp9">
    <link rel="apple-touch-icon" href="https://placehold.co/192x192/7c9194/FFFFFF.png">
    <style>
        :root {
            --primary: #7c9194;
            --primary-dark: #5c6e71;
            --secondary: #ff6b6b;
            --background: #1c2331;
            --card-bg: #2a3447;
            --card-bg-alt: #313e58;
            --text: #f8f9fa;
            --text-secondary: #d1d5db;
            --text-muted: #9ca3af;
            --border: #475569;
            --border-light: rgba(255, 255, 255, 0.1);
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
            --radius: 12px;
            --radius-sm: 8px;
            --highlight: #4ac1c3;
            --success: #34d399;
            --warning: #f59e0b;
            --danger: #ef4444;
            --transition: 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        body {
            background-color: var(--background);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            line-height: 1.4;
        }

        button, .button {
            cursor: pointer;
            padding: 12px 20px;
            border-radius: var(--radius-sm);
            border: none;
            font-weight: 600;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all var(--transition);
            outline: none;
        }

        .primary-button {
            background-color: var(--primary);
            color: var(--text);
        }

        .primary-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
        }

        .secondary-button {
            background-color: var(--secondary);
            color: var(--text);
        }

        .secondary-button:hover {
            filter: brightness(1.1);
            transform: translateY(-2px);
        }

        .ghost-button {
            background-color: transparent;
            color: var(--text);
            border: 1px solid var(--border-light);
        }

        .ghost-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .action-button {
            width: 42px;
            height: 42px;
            padding: 0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--card-bg-alt);
        }
        
        .action-button svg {
            width: 20px;
            height: 20px;
        }

        .action-button:hover {
            transform: scale(1.1);
        }

        input, textarea {
            width: 100%;
            padding: 14px 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border);
            background-color: rgba(0, 0, 0, 0.2);
            color: var(--text);
            margin-bottom: 16px;
            font-size: 16px;
            transition: var(--transition);
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: var(--highlight);
            box-shadow: 0 0 0 3px rgba(74, 193, 195, 0.2);
        }

        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Login Screen */
        .login-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .login-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(28, 35, 49, 0.97), rgba(28, 35, 49, 0.9)), url('https://placehold.co/1200x800/7c9194/FFFFFF') center/cover no-repeat;
            z-index: -1;
        }

        .login-card {
            width: 100%;
            max-width: 400px;
            padding: 32px;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-light);
            backdrop-filter: blur(10px);
        }

        .login-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .login-logo {
            font-size: 28px;
            font-weight: 800;
            color: var(--text);
            margin-top: 16px;
            letter-spacing: 1px;
        }

        .login-subtitle {
            color: var(--text-muted);
            margin-top: 8px;
        }

        .login-form {
            width: 100%;
        }

        /* App Layout */
        .app-container {
            display: none;
            flex-direction: column;
            min-height: 100vh;
        }

        .app-header {
            background-color: var(--card-bg);
            color: var(--text);
            padding: 16px 20px;
            position: sticky;
            top: 0;
            z-index: 10;
            box-shadow: var(--shadow);
            border-bottom: 1px solid var(--border-light);
        }

        .app-header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-actions {
            display: flex;
            gap: 12px;
        }

        .content {
            flex: 1;
            padding: 24px 0;
        }

        /* Tabs */
        .workout-tabs {
            display: flex;
            margin-bottom: 24px;
            background-color: var(--card-bg-alt);
            border-radius: var(--radius);
            padding: 6px;
            position: relative;
            overflow: hidden;
        }

        .workout-tab {
            flex: 1;
            padding: 12px;
            font-weight: 600;
            text-align: center;
            border-radius: var(--radius-sm);
            cursor: pointer;
            z-index: 1;
            transition: color 0.3s ease;
        }

        .workout-tab.active {
            color: var(--background);
        }

        .tab-indicator {
            position: absolute;
            height: calc(100% - 12px);
            border-radius: var(--radius-sm);
            background-color: var(--primary);
            transition: 0.3s ease;
            top: 6px;
            z-index: 0;
        }

        /* Workout panels */
        .workout-panel {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .workout-panel.active {
            display: block;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .panel-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
        }

        /* Exercise cards */
        .exercise-list {
            display: grid;
            gap: 16px;
        }

        .exercise-card {
            background-color: var(--card-bg);
            border-radius: var(--radius);
            overflow: hidden;
            border: 1px solid var(--border-light);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .exercise-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .exercise-header {
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .exercise-name {
            font-weight: 700;
            font-size: 18px;
        }

        .exercise-metadata {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--text-muted);
            font-size: 14px;
        }

        .exercise-content {
            padding: 0 16px;
            height: 0;
            overflow: hidden;
            transition: height 0.3s ease, padding 0.3s ease;
        }

        .exercise-card.expanded .exercise-content {
            height: auto;
            padding: 0 16px 16px;
        }

        .exercise-details {
            display: flex;
            gap: 12px;
            margin-bottom: 12px;
        }

        .detail-item {
            flex: 1;
            background-color: var(--card-bg-alt);
            padding: 10px;
            border-radius: var(--radius-sm);
            text-align: center;
        }

        .detail-label {
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 4px;
        }

        .detail-value {
            font-weight: 600;
            font-size: 16px;
        }

        .exercise-notes {
            color: var(--text-secondary);
            padding: 12px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: var(--radius-sm);
            font-size: 14px;
            line-height: 1.5;
        }

        /* Editor */
        .workout-editor {
            display: none;
            background-color: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin-top: 24px;
            border: 1px solid var(--border-light);
            animation: slideUp 0.3s ease;
        }

        .workout-editor.active {
            display: block;
        }

        .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .editor-title {
            font-size: 1.3rem;
            font-weight: 700;
        }

        .editor-body textarea {
            min-height: 200px;
            margin-bottom: 20px;
            resize: vertical;
        }

        .editor-actions {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background-color: var(--card-bg);
            color: var(--text);
            padding: 16px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--success);
            display: flex;
            align-items: center;
            gap: 12px;
            transition: transform 0.3s ease;
            z-index: 1000;
            min-width: 280px;
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
        }

        .toast-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .toast-message {
            font-size: 14px;
            color: var(--text-muted);
        }

        /* PWA Installation Banner */
        .install-banner {
            display: none;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: var(--card-bg);
            padding: 16px;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
            z-index: 100;
            border-top: 1px solid var(--border-light);
            animation: slideUp 0.3s ease;
        }

        .install-content {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .install-icon {
            width: 48px;
            height: 48px;
            background-color: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .install-message {
            flex: 1;
        }

        .install-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .install-subtitle {
            font-size: 14px;
            color: var(--text-muted);
        }

        .install-actions {
            display: flex;
            gap: 12px;
        }

        /* Floating action button */
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: var(--primary);
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 90;
        }

        .fab:hover {
            transform: scale(1.1);
            background-color: var(--primary-dark);
        }

        .fab svg {
            width: 24px;
            height: 24px;
        }

        /* Empty state */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
        }

        .empty-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .empty-description {
            font-size: 14px;
            max-width: 300px;
            margin: 0 auto;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .exercise-header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .exercise-metadata {
                margin-top: 8px;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-up {
            animation: slideUp 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div class="login-container" id="loginScreen">
        <div class="login-bg"></div>
        <div class="login-card slide-up">
            <div class="login-header">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 10H20L18 7M17 10V16C17 17.1046 16.1046 18 15 18H12M17 10L13 6M7 10H4L6 7M7 10V16C7 17.1046 7.89543 18 9 18H12M7 10L11 6M12 18V22M12 22L9 19M12 22L15 19" stroke="#7c9194" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <h1 class="login-logo">TCV CROSSTRAINING</h1>
                <p class="login-subtitle">Accede para ver tus entrenamientos</p>
            </div>
            <div class="login-form">
                <input type="password" id="passwordInput" placeholder="Contraseña" />
                <button class="primary-button" id="loginButton" style="width: 100%;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15M10 17L15 12M15 12L10 7M15 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Entrar
                </button>
                <p id="loginError" style="color: var(--danger); margin-top: 12px; text-align: center; display: none;">Contraseña incorrecta. Inténtalo de nuevo.</p>
            </div>
        </div>
    </div>

    <!-- App Screen -->
    <div class="app-container" id="appScreen">
        <header class="app-header">
            <div class="app-header-content container">
                <div class="logo">
                    <span>TCV CROSSTRAINING</span>
                </div>
                <div class="header-actions">
                    <button class="action-button" id="editToggleButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M11 4H4C3.44772 4 3 4.44772 3 5V19C3 19.5523 3.44772 20 4 20H18C18.5523 20 19 19.5523 19 19V12M17.5858 3.58579C18.3668 2.80474 19.6332 2.80474 20.4142 3.58579C21.1953 4.36683 21.1953 5.63316 20.4142 6.41421L11.8284 15H9L9 12.1716L17.5858 3.58579Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                    <button class="action-button" id="logoutButton">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17 16L21 12M21 12L17 8M21 12H9M13 16V17C13 18.6569 11.6569 20 10 20H6C4.34315 20 3 18.6569 3 17V7C3 5.34315 4.34315 4 6 4H10C11.6569 4 13 5.34315 13 7V8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <main class="content container">
            <div class="workout-tabs">
                <div class="workout-tab active" data-target="cardio">Cardio</div>
                <div class="workout-tab" data-target="strength">Fuerza</div>
                <div class="workout-tab" data-target="mix">Mixto</div>
                <div class="tab-indicator" style="width: 33.33%; left: 0;"></div>
            </div>

            <!-- Workout Display Panels -->
            <div class="workout-panels">
                <!-- Cardio Workout Panel -->
                <div class="workout-panel active" id="cardio-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Entrenamiento Cardio</h2>
                    </div>
                    <div class="exercise-list" id="cardio-exercises">
                        <!-- Exercises will be loaded here -->
                    </div>
                </div>

                <!-- Strength Workout Panel -->
                <div class="workout-panel" id="strength-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Entrenamiento de Fuerza</h2>
                    </div>
                    <div class="exercise-list" id="strength-exercises">
                        <!-- Exercises will be loaded here -->
                    </div>
                </div>

                <!-- Mixed Workout Panel -->
                <div class="workout-panel" id="mix-panel">
                    <div class="panel-header">
                        <h2 class="panel-title">Entrenamiento Mixto</h2>
                    </div>
                    <div class="exercise-list" id="mix-exercises">
                        <!-- Exercises will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Workout Editors -->
            <div class="workout-editor" id="cardio-editor">
                <div class="editor-header">
                    <h3 class="editor-title">Editar Entrenamiento Cardio</h3>
                </div>
                <div class="editor-body">
                    <textarea id="cardio-editor-content" placeholder="Introduce ejercicios, uno por línea. Formato: Nombre Ejercicio | Duración/Distancia | Notas"></textarea>
                </div>
                <div class="editor-actions">
                    <button class="ghost-button" id="cardio-cancel">Cancelar</button>
                    <button class="primary-button" id="cardio-save">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12L10 17L20 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Guardar
                    </button>
                </div>
            </div>

            <div class="workout-editor" id="strength-editor">
                <div class="editor-header">
                    <h3 class="editor-title">Editar Entrenamiento de Fuerza</h3>
                </div>
                <div class="editor-body">
                    <textarea id="strength-editor-content" placeholder="Introduce ejercicios, uno por línea. Formato: Nombre Ejercicio | Series x Repeticiones | Peso | Notas"></textarea>
                </div>
                <div class="editor-actions">
                    <button class="ghost-button" id="strength-cancel">Cancelar</button>
                    <button class="primary-button" id="strength-save">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12L10 17L20 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Guardar
                    </button>
                </div>
            </div>

            <div class="workout-editor" id="mix-editor">
                <div class="editor-header">
                    <h3 class="editor-title">Editar Entrenamiento Mixto</h3>
                </div>
                <div class="editor-body">
                    <textarea id="mix-editor-content" placeholder="Introduce ejercicios, uno por línea. Formato: Nombre Ejercicio | Series/Duración | Intensidad | Notas"></textarea>
                </div>
                <div class="editor-actions">
                    <button class="ghost-button" id="mix-cancel">Cancelar</button>
                    <button class="primary-button" id="mix-save">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 12L10 17L20 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        Guardar
                    </button>
                </div>
            </div>
        </main>

        <!-- Floating Action Button -->
        <div class="fab" id="editFab">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11 4H4C3.44772 4 3 4.44772 3 5V19C3 19.5523 3.44772 20 4 20H18C18.5523 20 19 19.5523 19 19V12M17.5858 3.58579C18.3668 2.80474 19.6332 2.80474 20.4142 3.58579C21.1953 4.36683 21.1953 5.63316 20.4142 6.41421L11.8284 15H9L9 12.1716L17.5858 3.58579Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>

        <!-- Toast Notification -->
        <div class="toast" id="toast">
            <div class="toast-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 12L10 17L20 7" stroke="#34d399" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
            <div class="toast-content">
                <div class="toast-title">¡Éxito!</div>
                <div class="toast-message">Entrenamiento guardado correctamente</div>
            </div>
        </div>

        <!-- PWA Installation Banner -->
        <div class="install-banner" id="installBanner">
            <div class="install-content container">
                <div class="install-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 18V14M12 14V10M12 14H16M12 14H8M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
                <div class="install-message">
                    <h3 class="install-title">Instala la aplicación</h3>
                    <p class="install-subtitle">Añade TCV Crosstraining a tu pantalla de inicio para un acceso rápido.</p>
                </div>
                <div class="install-actions">
                    <button class="ghost-button">Ahora no</button>
                    <button class="primary-button">Instalar</button>
                </div>
            </div>
        </div>

    <!-- Script JavaScript -->
    <script>
        // Script para TCV Crosstraining App
        document.addEventListener('DOMContentLoaded', function() {
            // Referencias a elementos DOM
            const loginScreen = document.getElementById('loginScreen');
            const appScreen = document.getElementById('appScreen');
            const passwordInput = document.getElementById('passwordInput');
            const loginButton = document.getElementById('loginButton');
            const loginError = document.getElementById('loginError');
            const logoutButton = document.getElementById('logoutButton');
            const workoutTabs = document.querySelectorAll('.workout-tab');
            const workoutPanels = document.querySelectorAll('.workout-panel');
            const tabIndicator = document.querySelector('.tab-indicator');
            const editToggleButton = document.getElementById('editToggleButton');
            const editFab = document.getElementById('editFab');
            const toast = document.getElementById('toast');
            
            // Referencias a editores
            const cardioEditor = document.getElementById('cardio-editor');
            const strengthEditor = document.getElementById('strength-editor');
            const mixEditor = document.getElementById('mix-editor');
            
            // Botones de cancelar y guardar
            const cardioCancel = document.getElementById('cardio-cancel');
            const cardioSave = document.getElementById('cardio-save');
            const strengthCancel = document.getElementById('strength-cancel');
            const strengthSave = document.getElementById('strength-save');
            const mixCancel = document.getElementById('mix-cancel');
            const mixSave = document.getElementById('mix-save');
            
            // Contenido de editores
            const cardioEditorContent = document.getElementById('cardio-editor-content');
            const strengthEditorContent = document.getElementById('strength-editor-content');
            const mixEditorContent = document.getElementById('mix-editor-content');
            
            // Contenedores de ejercicios
            const cardioExercises = document.getElementById('cardio-exercises');
            const strengthExercises = document.getElementById('strength-exercises');
            const mixExercises = document.getElementById('mix-exercises');
            
            // Contraseña de acceso (en una app real, esto debería estar en el servidor)
            const MASTER_PASSWORD = 'tcv2025';
            
            // Inicialización
            initApp();
            
            function initApp() {
                // Verificar si el usuario ya está logueado
                const isLoggedIn = localStorage.getItem('tcv_logged_in') === 'true';
                
                if (isLoggedIn) {
                    showApp();
                    loadWorkouts();
                } else {
                    showLogin();
                }
                
                // Configurar event listeners
                setupEventListeners();
            }
            
            function setupEventListeners() {
                // Login
                loginButton.addEventListener('click', handleLogin);
                passwordInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        handleLogin();
                    }
                });
                
                // Logout
                logoutButton.addEventListener('click', handleLogout);
                
                // Tabs
                workoutTabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        const target = tab.dataset.target;
                        switchTab(tab, target);
                    });
                });
                
                // Toggle editor con botón de header
                editToggleButton.addEventListener('click', toggleCurrentEditor);
                
                // Toggle editor con FAB
                editFab.addEventListener('click', toggleCurrentEditor);
                
                // Cancelar editores
                cardioCancel.addEventListener('click', () => hideEditor('cardio'));
                strengthCancel.addEventListener('click', () => hideEditor('strength'));
                mixCancel.addEventListener('click', () => hideEditor('mix'));
                
                // Guardar editores
                cardioSave.addEventListener('click', () => saveWorkout('cardio'));
                strengthSave.addEventListener('click', () => saveWorkout('strength'));
                mixSave.addEventListener('click', () => saveWorkout('mix'));
                
                // Click en ejercicios para expandir
                document.addEventListener('click', function(e) {
                    if (e.target.closest('.exercise-card')) {
                        const card = e.target.closest('.exercise-card');
                        toggleExerciseCard(card);
                    }
                });
            }
            
            function handleLogin() {
                const password = passwordInput.value;
                
                if (password === MASTER_PASSWORD) {
                    localStorage.setItem('tcv_logged_in', 'true');
                    showApp();
                    loadWorkouts();
                    passwordInput.value = '';
                    loginError.style.display = 'none';
                } else {
                    loginError.style.display = 'block';
                    passwordInput.focus();
                }
            }
            
            function handleLogout() {
                localStorage.removeItem('tcv_logged_in');
                showLogin();
            }
            
            function showLogin() {
                loginScreen.style.display = 'flex';
                appScreen.style.display = 'none';
            }
            
            function showApp() {
                loginScreen.style.display = 'none';
                appScreen.style.display = 'flex';
            }
            
            function switchTab(selectedTab, targetId) {
                // Actualizar clases activas en tabs
                workoutTabs.forEach(tab => {
                    tab.classList.remove('active');
                });
                selectedTab.classList.add('active');
                
                // Mover el indicador
                const index = Array.from(workoutTabs).indexOf(selectedTab);
                const width = 100 / workoutTabs.length;
                tabIndicator.style.width = width + '%';
                tabIndicator.style.left = (index * width) + '%';
                
                // Mostrar el panel correcto
                workoutPanels.forEach(panel => {
                    panel.classList.remove('active');
                });
                document.getElementById(`${targetId}-panel`).classList.add('active');
                
                // Esconder todos los editores
                hideAllEditors();
            }
            
            function toggleCurrentEditor() {
                const activePanel = document.querySelector('.workout-panel.active');
                const panelId = activePanel.id.replace('-panel', '');
                
                const editor = document.getElementById(`${panelId}-editor`);
                
                if (editor.classList.contains('active')) {
                    editor.classList.remove('active');
                } else {
                    hideAllEditors();
                    editor.classList.add('active');
                    
                    // Cargar el contenido actual en formato editable
                    loadEditorContent(panelId);
                }
            }
            
            function hideAllEditors() {
                cardioEditor.classList.remove('active');
                strengthEditor.classList.remove('active');
                mixEditor.classList.remove('active');
            }
            
            function hideEditor(type) {
                document.getElementById(`${type}-editor`).classList.remove('active');
            }
            
            function loadEditorContent(type) {
                const content = localStorage.getItem(`tcv_workout_${type}`) || '';
                document.getElementById(`${type}-editor-content`).value = content;
            }
            
            function saveWorkout(type) {
                const content = document.getElementById(`${type}-editor-content`).value;
                localStorage.setItem(`tcv_workout_${type}`, content);
                
                // Actualizar la visualización
                renderWorkout(type, content);
                
                // Ocultar el editor
                hideEditor(type);
                
                // Mostrar toast
                showToast('Guardado', 'Entrenamiento guardado correctamente');
            }
            
            function loadWorkouts() {
                // Cargar cada tipo de entrenamiento
                const cardioContent = localStorage.getItem('tcv_workout_cardio') || '';
                const strengthContent = localStorage.getItem('tcv_workout_strength') || '';
                const mixContent = localStorage.getItem('tcv_workout_mix') || '';
                
                // Renderizar cada tipo
                renderWorkout('cardio', cardioContent);
                renderWorkout('strength', strengthContent);
                renderWorkout('mix', mixContent);
            }
            
            function renderWorkout(type, content) {
                const container = document.getElementById(`${type}-exercises`);
                
                // Limpiar contenedor
                container.innerHTML = '';
                
                // Si no hay contenido, mostrar estado vacío
                if (!content.trim()) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <svg class="empty-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 8V12L15 15M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <h3 class="empty-title">No hay ejercicios aún</h3>
                            <p class="empty-description">Haz clic en el botón editar para añadir ejercicios a tu entrenamiento.</p>
                        </div>
                    `;
                    return;
                }
                
                // Procesar cada línea como un ejercicio
                const exercises = content.split('\n').filter(line => line.trim());
                
                exercises.forEach((exercise, index) => {
                    const parts = exercise.split('|').map(part => part.trim());
                    
                    // Obtener datos según formato
                    let name = parts[0] || 'Ejercicio sin nombre';
                    let duration = parts[1] || '';
                    let notes = parts[2] || '';
                    
                    // Crear card de ejercicio
                    const card = createExerciseCard(name, duration, notes, index);
                    container.appendChild(card);
                });
            }
            
            function createExerciseCard(name, detail, notes, index) {
                const card = document.createElement('div');
                card.className = 'exercise-card';
                card.dataset.index = index;
                
                card.innerHTML = `
                    <div class="exercise-header">
                        <div class="exercise-name">${name}</div>
                        <div class="exercise-metadata">
                            <span>${detail}</span>
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 9L12 16L5 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="exercise-content">
                        ${notes ? `
                        <div class="exercise-notes">
                            ${notes}
                        </div>
                        ` : ''}
                    </div>
                `;
                
                return card;
            }
            
            function toggleExerciseCard(card) {
                card.classList.toggle('expanded');
                
                // Cambiar el ícono de flecha
                const arrow = card.querySelector('.exercise-metadata svg');
                if (card.classList.contains('expanded')) {
                    arrow.innerHTML = `<path d="M19 15L12 8L5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`;
                } else {
                    arrow.innerHTML = `<path d="M19 9L12 16L5 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>`;
                }
            }
            
            function showToast(title, message, type = 'success') {
                // Configurar toast
                const toastTitle = toast.querySelector('.toast-title');
                const toastMessage = toast.querySelector('.toast-message');
                const toastIcon = toast.querySelector('.toast-icon svg');
                
                toast.className = 'toast';
                
                // Añadir tipo
                if (type) {
                    toast.classList.add(type);
                }
                
                // Actualizar contenido
                toastTitle.textContent = title;
                toastMessage.textContent = message;
                
                // Actualizar ícono según tipo
                if (type === 'success') {
                    toastIcon.innerHTML = '<path d="M5 12L10 17L20 7" stroke="#34d399" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
                } else if (type === 'error') {
                    toastIcon.innerHTML = '<path d="M6 18L18 6M6 6l12 12" stroke="#ef4444" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
                } else if (type === 'warning') {
                    toastIcon.innerHTML = '<path d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';
                }
                
                // Mostrar toast
                toast.classList.add('show');
                
                // Ocultar después de 3 segundos
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // Detectar si la app puede ser instalada como PWA
            let deferredPrompt;
            const installBanner = document.getElementById('installBanner');
            
            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevenir que Chrome muestre la mini-infobar
                e.preventDefault();
                // Guardar el evento para usarlo después
                deferredPrompt = e;
                // Mostrar el banner de instalación
                installBanner.style.display = 'block';
            });
            
            // Manejar la instalación de la PWA
            if (installBanner) {
                const installButton = installBanner.querySelector('.primary-button');
                const closeButton = installBanner.querySelector('.ghost-button');
                
                if (installButton) {
                    installButton.addEventListener('click', async () => {
                        if (!deferredPrompt) return;
                        
                        // Mostrar el prompt de instalación
                        deferredPrompt.prompt();
                        
                        // Esperar a que el usuario responda
                        const { outcome } = await deferredPrompt.userChoice;
                        
                        // Ocultar el banner
                        installBanner.style.display = 'none';
                        
                        // No podemos usar deferredPrompt de nuevo
                        deferredPrompt = null;
                    });
                }
                
                if (closeButton) {
                    closeButton.addEventListener('click', () => {
                        installBanner.style.display = 'none';
                    });
                }
            }
        });
    </script>
</body>
</html>
    
    <!-- Service Worker para PWA -->
    <script>
        // Registrar el Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado con éxito:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Error al registrar el Service Worker:', error);
                    });
            });
        }
    </script>
